import{$ as r}from"./vendor.e7ab9a7f.js";const H=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const n of s.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&o(n)}).observe(document,{childList:!0,subtree:!0});function a(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(i){if(i.ep)return;i.ep=!0;const s=a(i);fetch(i.href,s)}};H();window.loadedFiles={};window.borksyInfo={lastUpdated:"September 16, 2021",templates:[{filename:"Bitsy.5.5",description:"Bitsy 5.5 (modified for Borksy)",isDefault:!1},{filename:"BitsyHD.5.1",description:"Bitsy HD + Borksy (modified from Bitsy 5.1)",isDefault:!1},{filename:"Bitsy.6.0",description:"Bitsy 6.0 (modified for Borksy)",isDefault:!1},{filename:"Bitsy.6.3",description:"Bitsy 6.3 (modified for Borksy)",isDefault:!1},{filename:"Bitsy.6.4",description:"Bitsy 6.4 (modified for Borksy)",isDefault:!1},{filename:"Bitsy.6.5",description:"Bitsy 6.5",isDefault:!1},{filename:"Bitsy.7.0",description:"Bitsy 7.0",isDefault:!1},{filename:"Bitsy.7.2",description:"Bitsy 7.2",isDefault:!1},{filename:"Bitsy.7.8",description:"Bitsy 7.8",isDefault:!1},{filename:"Bitsy.7.10",description:"Bitsy 7.10",isDefault:!0}]};window.hacks={"avatar-by-room":{title:"\u{1F465} Avatar By Room",description:"Allows changing the avatar in certain rooms.",author:"Sean S. LeBlanc",readme:!0,type:"options",requires:"",hidden:!1,order:5,conflicts:!1,github:"avatar-by-room.js",forceLocal:!1},backdrops:{title:"\u{1F5BC} Backdrops",description:"Gives the game a backdrop",author:"Cephalopodunk",readme:!0,type:"options",requires:"",hidden:!1,order:5,conflicts:!1,github:"backdrops.js",forceLocal:!1},bitsymuse:{title:"\u{1F60C} Bitsymuse",description:"A hack that a variety of audio controls, including music that changes as you move between rooms.",author:"David Mowatt",readme:!0,type:"options",requires:"kitsy-script-toolkit",hidden:!1,order:5,conflicts:!1,github:"bitsymuse.js",forceLocal:!1},"character-portraits":{title:"\u{1F63D} Character Portraits",description:"High Quality Anime Jpegs (or pngs i guess)",author:"Sean S. LeBlanc",readme:!0,type:"options",requires:"",hidden:!1,order:5,conflicts:!1,github:"character-portraits.js",forceLocal:!1},"dialog-choices":{title:"\u{1F500} Dialog Choices",description:"Allows binary(?) dialog choices.",author:"Sean S. LeBlanc",readme:!0,type:"options",requires:"",hidden:!1,order:2,conflicts:!1,github:"dialog-choices.js",forceLocal:!1},"dialog-jump":{title:"\u{1F680} Dialog Jump",description:"Allows jumping from one dialog entry to another.",author:"Sean S. LeBlanc",readme:!0,type:"simple",requires:"",hidden:!1,order:2,conflicts:!1,github:"dialog-jump.js",forceLocal:!1},"dialog-pause":{title:"\u{1F4AC} Dialog Pause",description:"Allows adding pauses in between printing text.",author:"Sean S. LeBlanc",readme:!0,type:"simple",requires:"",hidden:!1,order:2,conflicts:!1,github:"dialog-pause.js",forceLocal:!1},"direction-in-dialog":{title:"\u{1F51D} Direction in Dialog",description:"Provides a variable with player direction.",author:"Sean S. LeBlanc",readme:!0,type:"simple",requires:"",hidden:!1,order:2,conflicts:!1,github:"direction-in-dialog.js",forceLocal:!1},"directional-avatar":{title:"\u2194 Directional Avatar",description:"Flips the player's sprite based on directional movement",author:"Sean S LeBlanc",readme:!0,type:"options",requires:!1,hidden:!1,order:10,conflicts:!1,github:"directional-avatar.js",forceLocal:!1},"dynamic-background":{title:"\u{1F5BC} Dynamic Background Color",description:"Changes the color of the BODY tag to the background color of the current room.",author:"Sean S LeBlanc",readme:!1,type:"simple",requires:!1,hidden:!1,order:10,conflicts:!1,github:"dynamic-background.js",forceLocal:!1},"edit-image-from-dialog":{title:"\u{1F58C} Edit Image from Dialog",description:"Allows editing of sprites, items, and tiles from dialog.",author:"Sean S LeBlanc",readme:!0,type:"simple",requires:"",hidden:!1,order:5,conflicts:!1,github:"edit-image-from-dialog.js",forceLocal:!1},"edit-room-from-dialog":{title:"\u{1F3E0} Edit Room from Dialog",description:"Allows editing the content of a room from dialog.",author:"Dana Holdampf",readme:!0,type:"simple",requires:"",hidden:!1,order:5,conflicts:!1,github:"edit-room-from-dialog.js",forceLocal:!1},"end-from-dialog":{title:"\u{1F51A} End From Dialog",description:"Adds (End) and (EndNow) to the the scripting language.",author:"@mildmojo",readme:!0,type:"simple",requires:"kitsy-script-toolkit",hidden:!1,order:5,conflicts:!1,github:"end-from-dialog.js",forceLocal:!1},"exit-from-dialog":{title:"\u{1F6AA} Exit From Dialog",description:"Adds (Exit) and (ExitNow) to the the scripting language.",author:"@mildmojo",readme:!0,type:"simple",requires:"kitsy-script-toolkit",hidden:!1,order:5,conflicts:!1,github:"exit-from-dialog.js",forceLocal:!1},"gamepad-input":{title:"\u{1F3AE} Gamepad Input",description:"Adds HTML5 gamepad support.",author:"Sean S. LeBlanc",readme:!0,type:"simple",requires:"",hidden:!1,order:3,conflicts:!1,github:"gamepad-input.js",forceLocal:!1},gravity:{title:"\u{1F342} Gravity",description:"Adds pseudo-platforming/gravity/physics.",author:"Cole Sea",readme:!0,type:"options",requires:"",hidden:!1,order:10,conflicts:!1,github:"gravity.js",forceLocal:!1},"javascript-dialog":{title:"\u2615 Javascript Dialog",description:"Lets you execute arbitrary JavaScript from dialog (including inside conditionals).",author:"Sean S. LeBlanc",readme:!0,type:"simple",requires:"kitsy-script-toolkit",hidden:!1,order:2,conflicts:!1,github:"javascript-dialog.js",forceLocal:!1},"long-dialog":{title:"\u{1F4DC} Long Dialog",description:"put more words onscreen",author:"Sean S. LeBlanc",readme:!0,type:"options",requires:"",hidden:!1,order:3,conflicts:!1,github:"long-dialog.js",forceLocal:!1},"multi-sprite-avatar":{title:"\u{1F468}\u200D\u{1F468}\u200D\u{1F467}\u200D\u{1F467} Multi-Sprite Avatar",description:"Allows multiple sprites to be moved together along with the player to create the illusion of a larger avatar.",author:"Sean S. LeBlanc",readme:!0,type:"options",requires:"kitsy-script-toolkit",hidden:!1,order:5,conflicts:!1,github:"multi-sprite-avatar.js",forceLocal:!1},"opaque-tiles":{title:"\u2B1B Opaque Tiles",description:"Adds tiles which hide the player.",author:"Sean S. LeBlanc",readme:!0,type:"options",requires:"",hidden:!1,order:5,conflicts:!1,github:"opaque-tiles.js",forceLocal:!1},"permanent-items":{title:"\u23F3 Permanent Items",description:"Prevents certain items from being picked up, but allows them to be walked over and triggers their dialog.",author:"Sean S. LeBlanc",readme:!0,type:"options",requires:"kitsy-script-toolkit",hidden:!1,order:4,conflicts:!1,github:"permanent-items.js",forceLocal:!1},"replace-drawing":{title:"\u{1F3AD} Replace Drawing",description:"Add name-tags to replace drawings when the game is loading",author:"Elkie Nova",readme:!0,type:"simple",requires:"",hidden:!1,order:3,conflicts:!1,github:"replace-drawing.js",forceLocal:!1},save:{title:"\u{1F4BE} Save",description:"Save/Load Your Game",author:"Sean S. LeBlanc",readme:!0,type:"options",requires:"",hidden:!1,order:5,conflicts:!1,github:"save.js",forceLocal:!1},"solid-items":{title:"\u{1F6D1} Solid Items",description:"Prevents certain items from being picked up or walked over, but still triggers their dialog.",author:"Sean S. LeBlanc",readme:!0,type:"options",requires:!1,hidden:!1,order:5,conflicts:!1,github:"solid-items.js",forceLocal:!1},stopwatch:{title:"\u23F1\uFE0F Stopwatch",description:"Allows timing player actions.",author:"Lenny Magner",readme:!0,type:"options",requires:"",hidden:!1,order:5,conflicts:!1,github:"stopwatch.js",forceLocal:!1},"text-to-speech":{title:"\u{1F5E3} Text to Speech",description:" Provides text-to-speech for bitsy dialog.",author:"Sean S. LeBlanc",readme:!0,type:"options",requires:"",hidden:!1,order:2,conflicts:!1,github:"text-to-speech.js",forceLocal:!1},"textbox-styler":{title:"\u{1F4D0} Textbox Styler",description:" Customize the style and properties of the textbox.",author:"Dana Holdampf & Sean S. LeBlanc",readme:!0,type:"options",requires:"",hidden:!1,order:2,conflicts:!1,github:"textbox-styler.js",forceLocal:!1},"tracery-processing":{title:"\u{1F3F0} Tracery Processing",description:"process all dialog text with a tracery grammar",author:"Sean S. LeBlanc",readme:!0,type:"options",requires:"",hidden:!1,order:3,conflicts:!1,github:"tracery-processing.js",forceLocal:!1},"transparent-dialog":{title:"\u{1F441}\uFE0F\u200D\u{1F5E8}\uFE0F Transparent Dialog",description:"Makes the dialog box have a transparent background.",author:"Sean S. LeBlanc",readme:!1,type:"simple",requires:"",hidden:!1,order:5,conflicts:!1,github:"transparent-dialog.js",forceLocal:!1},"transparent-sprites":{title:"\u{1F3C1} Transparent Sprites",description:"Makes all sprites have transparent backgrounds. Tiles can be seen underneath the player, sprites, and items.",author:"Sean S. LeBlanc",readme:!0,type:"options",requires:!1,hidden:!1,order:30,conflicts:!1,github:"transparent-sprites.js",forceLocal:!1},"unique-items":{title:"\u2744 Unique Items",description:"Adds support for items which, when picked up, remove all other instances of that item from the game.",author:"Sean S. LeBlanc",readme:!0,type:"options",requires:!1,hidden:!1,order:5,conflicts:!1,github:"unique-items.js",forceLocal:!1}};function m(e,t,a,o,i){a=a||function(){},o=o||function(){};var s=r.ajax(t+e);s.done(function(){e=i||e,window.loadedFiles[e]=escape(s.responseText),console.log("Loaded "+e+" via AJAX"),a(s.responseText,i)}),s.fail(function(){console.log("Error loading "+e+" via AJAX"),o(s.responseText,i)})}function C(){let e=document.querySelector("select#template");e.innerHTML="";for(var t=window.borksyInfo.templates.length-1;t>=0;t--){let a=window.borksyInfo.templates[t].filename+".html",o=window.borksyInfo.templates[t].description;localStorage.getItem("template");let i=window.borksyInfo.templates[t].isDefault;e.innerHTML+=`<option value="${a}" ${i?"data-default-option":""}>${o}</option>`,m(a,"template/")}}function E(e,t){var a=document.createElement("a");a.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(unescape(t))),a.setAttribute("download",e),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a),console.log("File '"+e+"' downloaded")}function b(e,t){t=t||10;var a=e.toString(),o=a.length>t?"...":"";return a.substring(0,t)+o}function I(e){return e.toLowerCase().replace(/-(.)/g,function(t,a){return a.toUpperCase()})}function h(e){return e.replace(/[^\w\s]/gi,"")}function O(e){return e.length>1?e.slice(0,e.length-1).join(", ")+", and "+e.slice(-1):e[0]}function F(e,t){var a=new RegExp(t,"g");e.val(e.val().replace(a,""))}function p(e,t){e.data("clean-regex")&&F(e,e.data("clean-regex")),e.prop("type")==="checkbox"?t=e.prop("checked"):typeof t=="undefined"?t=e.val():e.val(t);var a=e.attr("name");localStorage.setItem(a,t),console.log("Key: '"+a+"' saved to localStorage: "+b(t))}function v(e){var t=e.attr("name"),a=localStorage.getItem(t);if(a===null){console.log(" Attempted to get key: "+t+" from localStorage, but nothing was found.");return}else if(e.prop("type")==="checkbox"){var o=a==="true";e.prop("checked",o)}else e.val(a);console.log(" Got key: "+t+" from localStorage: "+b(a)),t==="template"&&a.split(".")[0]==="BitsyHD"&&(r("#mascot").addClass("borksyHD"),console.log("BitsyHD detected"))}function d(e){let t=e.attr("name"),a=function(){};switch(t){case"template":U(),a=M;break}e.change(function(){p(e),a(e)})}function M(e){let t=e.val().split(".")[0]==="BitsyHD",a=localStorage.getItem("gamedate")==null,o=window.loadedFiles["gamedata.HD.txt"],i=o!==void 0,s=r("#mascot");if(t){if(s.addClass("borksyHD"),a&&i){let n=r("#gamedata");n.val(o),p(n)}}else s.removeClass("borksyHD")}function P(e){r.each(e,function(t,a){var o=r("#"+a),i=o.prop("type")==="hidden"&&o.val()===!1,s=o.prop("type")==="checkbox"&&o.prop("checked")===!1;i||s||(o.val(!1),o.prop("checked",!1),x(o,!1))})}function k(e){var t=r("[data-associated-hack="+e.data("hack")+"]");t.length>0&&w(t,e)}function w(e,t){t.prop("checked")===!0?e.addClass("included"):e.removeClass("included")}function x(e,t){typeof t=="undefined"&&(t=!0),p(e),k(e);var a=hacks[e.data("hack")].conflicts;a&&t&&P(a.split(","))}function G(e){e.change(function(){x(e)})}function $(e){return r("[data-borksy-replace-single]").each(function(){var t=r(this),a="BORKSY-"+t.data("borksy-replace-single"),o=t.val();e=e.replace(a,o)}),e}function R(){var e=[];return r.each(hacks,function(t,a){e.push(Object.assign({name:t},a))}),e.sort(function(t,a){return t.order>a.order?1:t.order===a.order?0:-1}),e}function K(e){var t=R();return r.each(t,function(a,o){var i=o.name,s=(o.type,i+".js"),n=r("#"+i),c=n.prop("checked")||n.val()==="true";if(!!c){var l=window.loadedFiles[s];if(o.type==="options"){l=unescape(l);var f=r("#"+i+"-options").val();l=l.replace(/(var hackOptions.*= ){[^]*?}(;$)/m,`$1 {
${f}
} $2`)}e+=l+`
`}}),e}function S(){r("[data-save]").each(function(){p(r(this))});let e=r("#template").val();var t=window.loadedFiles[e].repeat(1),a="";t=$(t),r("[data-borksy-replace-single]").promise().done(function(){a=K(a)}),r("[data-hack]").promise().done(function(){var o=r("#filename").val();t=t.replace("BORKSY-HACKS",a),E(o+".html",t)})}function L(){var e=r("body");e.hasClass("party")?(e.removeClass("party"),alert("\u{1F63E} Party Mode Deactivated. Everyone out. \u{1F63E}")):(e.addClass("party"),alert("\u2728\u{1F308} Party Mode Activated! \u{1F308}\u2728"))}function U(){let e="gamedata.HD.txt",t=r.ajax("defaults/"+e);t.done(function(){var a=t.responseText;window.loadedFiles[e]=a})}function J(){var e=r("#about_content"),t=r.ajax("about/about.html"),a="<p>Whoa, Something went wrong!</p>";t.done(function(){var o=t.responseText;e.html(o);var i=r.ajax("about/how-to-use-borksy.html");i.done(function(){var l=u("How To Use Borksy");l.append(i.responseText),e.append(l)});var s=r.ajax("about/troubleshooting-faqs.html");s.done(function(){var l=u("Troubleshooting / FAQs");l.append(s.responseText),e.append(l)});var n=r.ajax("about/other-tools.html");n.done(function(){var l=u("Other Bitsy Tools");l.append(n.responseText),e.append(l)});var c=r.ajax("about/ayos-special-tips.html");c.done(function(){var l=u("AYo's Special Tips");l.append(c.responseText),e.append(l)})}),t.fail(function(){e.html(a)})}function Y(e){e.val(e.data("default")),d(e)}function N(e){var t=unescape(window.loadedFiles[e.attr("name")+".txt"]);e.val(t),d(e)}function z(e){var t=e.data("default");t=t==="true",e.prop("type")==="checkbox"?e.prop("checked",t):e.val(t),d(e)}function _(e){var t=e.data("default"),a="defaults/"+t,o=r.ajax(a);o.done(function(){var i=o.responseText;e.val(i),window.loadedFiles[t]=i,d(e)}),o.fail(function(){e.val("failed to load default!"),console.log(o.error),d(e)})}function Q(e){X(e.data("default"))}function V(e){let t=e[0].options;for(var a=t.length-1;a>=0;a--)if(r(t[a]).data("default-option")!==void 0){e[0].selectedIndex=a;break}d(e)}function D(e){e=e||!0,r("[data-save]").each(function(){var t=r(this),a=localStorage.getItem(t.attr("name")),o=typeof t.data("default")!="undefined",i=a!==null;if(o&&(!i||!e)){var s=t.data("default-type");switch(s){case"string":Y(t);break;case"boolean":z(t);break;case"textfile":_(t);break;case"font":Q(t);break;case"option":V(t);break;case"hackOptions":N(t);break}}else i?v(t):t.val(""),d(t);k(t)}),console.log("Defaults loaded. Forced? "+!e)}function B(){var e=r("[data-save]"),t=e.length;confirm("Are you sure you want to erase all data and restore defaults?")&&(e.each(function(){localStorage.removeItem(r(this).attr("name")),--t||(console.log("Cookies removed"),D(!1))}),r("#mascot").removeClass("borksyHD"))}function W(){var e={x:6,y:8},t={x:16,y:16},a=1,o=document.createElement("canvas");o.width=(e.x+a)*t.x+a,o.height=(e.y+a)*t.y+a;var i=o.getContext("2d"),s=[];i.drawImage(this,0,0);for(var n=0;n<t.y;++n)for(var c=0;c<t.x;++c){var l=i.getImageData(c*(e.x+a)+a,n*(e.y+a)+a,e.x,e.y);s.push(l.data)}for(var f=0;f<s.length;++f){for(var y=[],g=0;g<s[f].length;g+=4)y.push(s[f][g]>255/2?1:0);s[f]=y}s=[].concat.apply([],s),p(r("#fontdata"),"[/*"+r("#fontfilename").val()+"*/"+s.toString()+"]")}function X(e){var t;typeof e=="object"?t=e.target.result:(t="fonts/"+e,Z(e));var a=new Image;a.onload=W,a.src=t,te()}function Z(e){var t=r("#fontfilename");t.val()!==e&&(t.val(e),p(t))}function ee(){r("[data-replace-element]").each(function(){j(r(this))})}function j(e){var t=e.data("replace-element"),a=window[t]();e.replaceWith(a)}function te(){j(r("[data-replace-element=createFontPreview]"))}function ae(e,t){var a=t.substr(0,t.lastIndexOf("."))||t;r("#hacks-section").append(q(a,hacks[a]))}function oe(e,t){}function T(e,t){var e=e.substr(0,e.lastIndexOf("."))||e,a=e+".js",o="hacks/dist/";m(a,o,ae,oe,a)}function re(e,t){var a=t.substr(0,t.lastIndexOf("."))||t;hacks[a].usingGithub=!0,r("#hacks-section").append(q(a,hacks[a]))}function ie(e,t){var a=t.substr(0,t.lastIndexOf("."))||t;hacks[a].usingGithub=!1,T(t,hacks[a])}function se(e,t){var a=e+".js",o=t.github,i="https://raw.githubusercontent.com/seleb/bitsy-hacks/main/dist/";m(o,i,re,ie,a)}function ne(e,t){t.forceLocal!==!1?T(e):t.github!==!1&&se(e,t)}function le(e,t,a){e.attr({"data-save":!0,"data-default":!1,"data-default-type":"boolean","data-hack":t,"data-hack-type":a.type}),a.requires&&e.attr("data-requires",a.requires)}function ce(e,t,a){var o=[];r.each(t.conflicts.split(","),function(n,c){o.push(h(hacks[c].title))});var i=O(o),s=r("<p>",{text:"This hack conflicts with "+i+".",class:"conflict-warning"});a.append(s)}function de(e,t,a){var o="github-message",i="",s=h(t.title);t.forceLocal!==!1?i="Borksy is opting to use a local version of "+s+" from "+window.borksyInfo.lastUpdated+".":hacks[e].usingGithub===!0?i=s+" is using the most recent version from Github.":(i=s+" could not be loaded from Github, local version retrieved on "+window.borksyInfo.lastUpdated+" is being used.",o+=" warning");var n=r("<p>",{text:i,class:o});a.append(n)}function fe(e,t,a){var o=u(h(t.title)+" Options:"),i=r("<label>",{text:"var "+I(e)+"Options = {"});m(e+".options.txt","hacks/options/",function(s){var n=r("<textarea>",{rows:5,cols:50,text:s,name:e+".options",id:e+"-options"});n.attr({"data-save":!0,"data-default-type":"hackOptions","data-default":e+".options.txt"}),v(n),d(n),i.append(n),i.append(document.createTextNode("};")),o.append(i),a.append(o)})}function ue(e,t,a){var o=u(h(t.title)+" README:");m(e+".readme.txt","hacks/info/",function(i){var s=r("<pre>",{text:i});o.append(s),a.append(o)})}function q(e,t){var a=u(t.title+" (By "+t.author+")");a.attr("data-associated-hack",e);var o=r("<p>",{text:t.description});a.append(o),t.conflicts&&ce(e,t,a),de(e,t,a);var i=r("<label>",{text:"Include "+h(t.title)}),s=r("<input>",{type:"checkbox",name:e,id:e});return le(s,e,t),v(s),w(a,s),G(s),i.append(s),a.append(i),t.type==="options"&&fe(e,t,a),t.readme===!0&&ue(e,t,a),a}function pe(e){let t=Object.keys(window.hacks).sort();r.each(t,function(a,o){ne(o,window.hacks[o])})}function u(e){var t=r("<div>",{class:"collapsible"});return t.data("collapse",""),t.data("header",e),A(t),t}function me(){const e=r("[data-collapsible]");var t=0;e.each(function(){var a=r(this);A(a),a.attr("id")==="hacks-section"&&(console.log("HACK IT UP YO"),pe()),t++,t===e.length&&r("#preloader").fadeOut()})}function A(e){var t=r("<span>",{class:"collapsible_closer",click:function(){e.toggleClass("open")}}),a=r("<span>",{class:"collapsible_header",text:e.data("header"),click:function(){e.toggleClass("open")}});e.prepend(t),e.prepend(a)}function he(){r(window).bind("keydown",function(e){if(e.ctrlKey||e.metaKey)switch(String.fromCharCode(e.which).toLowerCase()){case"s":e.preventDefault(),S();break;case"d":e.preventDefault(),B();break;case"p":e.preventDefault(),L();break}})}r(document).ready(function(){me(),J(),C(),D(),ee(),r("#download-button").click(S),r("#restore-button").click(B),he(),r("#mascot").click(L)});
